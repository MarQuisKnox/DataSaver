/*
 * jQuery DataSaver plugin 0.0.3 
 * 
 * Author: Seleznev Alexander (ABSENT) 
 * Email: absenteg@gmail.com 
 * Website: http://whoisabsent.ru 
 *  
 * Licensed under the MIT license. 
 * http://www.opensource.org/licenses/mit-license.php 
 */
 
(function(d){function f(a){var b=g(a),c;switch(a.tagName){case "INPUT":switch(d(a).attr("type").toUpperCase()){case "CHECKBOX":c=d(a).prop("checked");break;case "RADIO":c=d(a).val();break;default:c=d(a).val()}break;case "SELECT":c=d(a).val();break;case "TEXTAREA":c=d(a).val()}"undefined"!==typeof c&&(localStorage[b]=c,d(a).trigger(e+"_save",[b]))}function k(a){var b=g(a),c=localStorage[b];if(null!=c){switch(a.tagName){case "INPUT":switch(d(a).attr("type").toUpperCase()){case "CHECKBOX":d(a).prop("checked",
"true"===c);break;case "RADIO":d("input[type=radio][name="+a.name+"][value="+c+"]").prop("checked",!0);break;default:d(a).val(c)}break;case "SELECT":c=c.split(",");d(a).val(c);break;case "TEXTAREA":d(a).val(c)}d(a).trigger(e+"_load",[b])}}function g(a){var b=a.storageKey;if("undefined"===typeof b){var b={host:window.location.host,pathname:window.location.pathname},c={tagName:a.tagName,name:a.name};d(a).is(":input")&&(c.type=a.type);d(a).is(":radio")||(c.id=a.id,c.className=a.className);b=[e,JSON.stringify(b),
JSON.stringify(c)].join(".");a.storageKey=b}return b}var e="DataSaver",h={init:function(a){var b=d.extend({timeout:0,events:"change"},a);return this.each(function(a,e){k(e);"undefined"!==typeof b.events&&0<b.events.length&&(b.events=b.events.split(",").join(" "),d(this).on(b.events,function(a){f(e)}));"number"===typeof b.timeout&&0<b.timeout&&setInterval(function(){f(e)},b.timeout)})},load:function(){return this.each(function(a,b){k(b)})},save:function(){return this.each(function(a,b){f(b)})},remove:function(){return this.each(function(a,
b){var c=g(b);localStorage.removeItem(c);d(b).trigger(e+"_remove",[c])})}};d.fn.DataSaver=function(a){"undefined"===typeof Storage&&d.error("Your browser doesn't support web storage.");if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)d.error('Method "'+a+'" does not exist on '+e+".");else return h.init.apply(this,arguments)}})(jQuery);
/*
 * jQuery DataSaver plugin 0.0.4 
 * 
 * Author: Seleznev Alexander (ABSENT) 
 * Email: absenteg@gmail.com 
 * Website: http://whoisabsent.ru 
 *  
 * Licensed under the MIT license. 
 * http://www.opensource.org/licenses/mit-license.php 
 */

(function(c){function g(a){var b=h(a),d;switch(a.tagName){case "INPUT":switch(c(a).attr("type").toUpperCase()){case "CHECKBOX":d=c(a).prop("checked");break;case "RADIO":d=c(a).val();break;default:d=c(a).val()}break;case "SELECT":d=c(a).val();break;case "TEXTAREA":d=c(a).val()}"undefined"!==typeof d&&(localStorage[b]=d);c(a).trigger(f+"_save")}function l(a){var b=h(a),b=localStorage[b];if(null!=b)switch(a.tagName){case "INPUT":switch(c(a).attr("type").toUpperCase()){case "CHECKBOX":c(a).prop("checked",
"true"===b);break;case "RADIO":c("input[type=radio][name="+a.name+"][value="+b+"]").prop("checked",!0);break;default:c(a).val(b)}break;case "SELECT":b=b.split(",");c(a).val(b);break;case "TEXTAREA":c(a).val(b)}c(a).trigger(f+"_load")}function h(a){var b=f+"_key",d=a[b];if("undefined"===typeof d){var d={host:window.location.host,pathname:window.location.pathname},e={tagName:a.tagName,name:a.name};c(a).is(":input")&&(e.type=a.type);c(a).is(":radio")||(e.id=a.id,e.className=a.className);d=[f,JSON.stringify(d),
JSON.stringify(e)].join(".");a[b]=d}return d}var f="DataSaver",k={init:function(a){var b=c.extend({timeout:0,events:"change"},a);return this.each(function(a,e){l(e);"undefined"!==typeof b.events&&0<b.events.length&&(b.events=b.events.split(",").join(" "),c(this).on(b.events,function(a){g(e)}));"number"===typeof b.timeout&&0<b.timeout&&setInterval(function(){g(e)},b.timeout)})},load:function(){return this.each(function(a,b){l(b)})},save:function(){return this.each(function(a,b){g(b)})},remove:function(){return this.each(function(a,
b){var d=h(b);localStorage.removeItem(d);c(b).trigger(f+"_remove")})}};c.fn.DataSaver=function(a){"localStorage"in window&&null!==window.localStorage||c.error("Your browser doesn't support localStorage.");if(k[a])return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)c.error('Method "'+a+'" does not exist on '+f+".");else return k.init.apply(this,arguments)}})(jQuery);